(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(){function n(e){var t=this,i=e.containerSelector,o=e.itemsSelector,l=e.nextScroller,s=e.prevScroller,c=e.activeItemClass,a=void 0===c?null:c,u=e.textItemsSelectors,_=void 0===u?[]:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r(this,"_checkScrollBorder",(function(e){var r="next"===e?t._length:1,n="next"===e?0:t._length+1;t._activeItemClass&&t._items[t._currentIdx].classList.remove(t._activeItemClass),t._currentIdx===r&&(t._items[n].scrollIntoView({inline:"start",block:"nearest",behavior:"auto"}),t._currentIdx=n),t._currentIdx="next"===e?t._currentIdx+1:t._currentIdx-1})),r(this,"_scrollToCurrentItem",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";t._activeItemClass&&t._items[t._currentIdx].classList.add(t._activeItemClass),t._items[t._currentIdx].scrollIntoView({inline:"start",block:"nearest",behavior:e}),t._textElements.forEach((function(e){var r=e.element,n=e.source;r.textContent=t._items[t._currentIdx].dataset[n]}))})),r(this,"_nextEventHandler",(function(){t._checkScrollBorder("next"),t._scrollToCurrentItem()})),r(this,"_prevEventHandler",(function(){t._checkScrollBorder("prev"),t._scrollToCurrentItem()})),this._containerSelector=i,this._itemsSelector=o,this._activeItemClass=a,this._textItemsSelectors=_,this._nextScrollerSelector=l,this._prevScrollerSelector=s,this._nextScroller=document.querySelector(this._nextScrollerSelector),this._prevScroller=document.querySelector(this._prevScrollerSelector)}var i,o;return i=n,(o=[{key:"_resetPage",value:function(){window.scrollTo(0,0)}},{key:"_getTextElements",value:function(){this._textElements=this._textItemsSelectors.map((function(e){return{element:document.querySelector(e.selector),source:e.attributeName}}))}},{key:"_addScrollPlaceholders",value:function(){var t,r=this._items[this._length-1].cloneNode(!0),n=this._items[0].cloneNode(!0);this._container.append(n),this._container.prepend(r),this._items=[r].concat(function(t){if(Array.isArray(t))return e(t)}(t=this._items)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n])}},{key:"_removeScrollPlaceholders",value:function(){this._items[0].remove(),this._items[this._length+1].remove()}},{key:"_setEventListeners",value:function(){this._nextScroller.addEventListener("click",this._nextEventHandler),this._prevScroller.addEventListener("click",this._prevEventHandler)}},{key:"_removeEventListeners",value:function(){this._nextScroller.removeEventListener("click",this._nextEventHandler),this._prevScroller.removeEventListener("click",this._prevEventHandler)}},{key:"_getElements",value:function(){this._container=document.querySelector(this._containerSelector),this._items=Array.from(this._container.querySelectorAll(this._itemsSelector)),this._currentIdx=1,this._length=this._items.length}},{key:"resetItems",value:function(){this._removeEventListeners(),this._removeScrollPlaceholders(),this._getElements(),this._getTextElements(),this._addScrollPlaceholders(),this._setEventListeners(),this._scrollToCurrentItem("auto")}},{key:"init",value:function(){this._getElements(),this._getTextElements(),this._addScrollPlaceholders(),this._setEventListeners(),this._scrollToCurrentItem("auto"),this._resetPage()}}])&&t(i.prototype,o),Object.defineProperty(i,"prototype",{writable:!1}),n}();function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){function e(t){var r=this,n=t.containerSelector,i=t.itemsSelector,o=t.callback;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_checkScrollBorder",(function(e){var t="next"===e?r._length:1,n="next"===e?0:r._length+1;r._currentIdx===t&&(r._items[n].scrollIntoView({inline:"start",block:"nearest",behavior:"auto"}),r._currentIdx=n),r._currentIdx="next"===e?r._currentIdx+1:r._currentIdx-1})),l(this,"_scrollToCurrentItem",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";r._items[r._currentIdx].scrollIntoView({inline:"start",block:"nearest",behavior:e})})),l(this,"_startTouch",(function(e){r._initialX=e.touches[0].clientX,r._initialY=e.touches[0].clientY})),l(this,"_moveTouch",(function(e){if(null!==r._initialX&&null!==r._initialY){var t=e.touches[0].clientX,n=e.touches[0].clientY,i=r._initialX-t,o=r._initialY-n;Math.abs(i)>Math.abs(o)&&(r._checkScrollBorder(i>0?"next":"prev"),r._scrollToCurrentItem()),r._initialX=null,r._initialY=null,e.preventDefault()}})),l(this,"_setEventListeners",(function(){r._initialX=null,r._initialY=null,r._container.addEventListener("touchstart",r._startTouch,!1),r._container.addEventListener("touchmove",r._moveTouch,!1)})),this._containerSelector=n,this._itemsSelector=i,this._callback=o}var t,r;return t=e,(r=[{key:"_resetPage",value:function(){window.scrollTo(0,0)}},{key:"setElements",value:function(){this._container=document.querySelector(this._containerSelector),this._items=Array.from(this._container.querySelectorAll(this._itemsSelector)),this._currentIdx=1,this._length=this._items.length}},{key:"_addScrollPlaceholders",value:function(){var e,t=this._items[this._length-1].cloneNode(!0),r=this._items[0].cloneNode(!0);this._container.append(r),this._container.prepend(t),this._items=[t].concat(function(e){if(Array.isArray(e))return i(e)}(e=this._items)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[r])}},{key:"_removeScrollPlaceholders",value:function(){this._items[0].remove(),this._items[this._length+1].remove()}},{key:"_removeEventListeners",value:function(){this._container.removeEventListener("touchstart",this._startTouch,!1),this._container.removeEventListener("touchmove",this._moveTouch,!1)}},{key:"resetItems",value:function(){this._removeScrollPlaceholders(),this._removeEventListeners(),this.setElements(),this._addScrollPlaceholders(),this._setEventListeners()}},{key:"init",value:function(){this.setElements(),this._addScrollPlaceholders(),this._setEventListeners(),this._scrollToCurrentItem("auto"),this._resetPage()}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c=document.querySelectorAll("[data-href]"),a=document.querySelectorAll(".theme-toggler"),u=document.querySelector(".page");new n({containerSelector:".roads__pics-list",itemsSelector:".roads__pics-item",activeItemClass:"roads__pics-item_active",nextScroller:".roads__button_dir_right",prevScroller:".roads__button_dir_left",textItemsSelectors:[{selector:".roads__title",attributeName:"title"},{selector:".roads__text",attributeName:"text"}]}).init();var _=new s({containerSelector:".bikes__type_active > .bikes__bikes",itemsSelector:".bikes__li",callback:function(){console.log(this._currentIdx)}});_.init(),c.forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.href;document.querySelector(t).scrollIntoView({behavior:"smooth"})}))})),a.forEach((function(e){e.addEventListener("click",(function(){u.classList.toggle("page_dark"),e.querySelector(".theme-toggler__switch-toggle").classList.toggle("theme-toggler__switch-toggle_dark")}))})),document.querySelectorAll(".bikes__button").forEach((function(e){e.addEventListener("click",(function(){document.querySelector(".bikes__type_active").classList.remove("bikes__type_active"),document.querySelector(".bikes__button_active").classList.remove("bikes__button_active"),document.querySelector("#bikes-type-".concat(e.dataset.type)).classList.add("bikes__type_active"),e.classList.add("bikes__button_active")}))})),document.querySelector(".header__burger").addEventListener("click",(function(){document.querySelector(".header__nav").classList.toggle("header__nav_opened"),document.querySelector(".header__burger").classList.toggle("hamburger_active")}));var h=document.querySelector(".bikes__select");h.addEventListener("change",(function(e){document.querySelector(".bikes__type_active").classList.remove("bikes__type_active"),document.querySelector("#bikes-type-".concat(h.value)).classList.add("bikes__type_active"),_.resetItems()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXRzL2pzL2luZGV4LjEuY2NiZDk5ODYuanMiLCJtYXBwaW5ncyI6IitaQUFxQkEsRUFBQUEsV0FDbkIsY0FPRyxXQU5EQyxFQU1DLEVBTkRBLGtCQUNBQyxFQUtDLEVBTERBLGNBQ0FDLEVBSUMsRUFKREEsYUFDQUMsRUFHQyxFQUhEQSxhQUdDLElBRkRDLGdCQUFBQSxPQUVDLE1BRmlCLEtBRWpCLE1BRERDLG1CQUFBQSxPQUNDLE1BRG9CLEdBQ3BCLEcsNEZBQUEsc0NBc0NrQixTQUFDQyxHQUNwQixJQUFNQyxFQUFpQixTQUFSRCxFQUFpQixFQUFLRSxRQUFVLEVBQ3pDQyxFQUFzQixTQUFSSCxFQUFpQixFQUFJLEVBQUtFLFFBQVUsRUFDcEQsRUFBS0Usa0JBQ1AsRUFBS0MsT0FBTyxFQUFLQyxhQUFhQyxVQUFVQyxPQUFPLEVBQUtKLGtCQUVsRCxFQUFLRSxjQUFnQkwsSUFDdkIsRUFBS0ksT0FBT0YsR0FBYU0sZUFBZSxDQUN0Q0MsT0FBUSxRQUNSQyxNQUFPLFVBQ1BDLFNBQVUsU0FFWixFQUFLTixZQUFjSCxHQUVyQixFQUFLRyxZQUFzQixTQUFSTixFQUNmLEVBQUtNLFlBQWMsRUFDbkIsRUFBS0EsWUFBYyxDQUN4QixJQXZERSwrQkF5RG9CLFdBQXlCLElBQXhCTSxFQUF3Qix1REFBYixTQUM3QixFQUFLUixrQkFDUCxFQUFLQyxPQUFPLEVBQUtDLGFBQWFDLFVBQVVNLElBQUksRUFBS1Qsa0JBRW5ELEVBQUtDLE9BQU8sRUFBS0MsYUFBYUcsZUFBZSxDQUMzQ0MsT0FBUSxRQUNSQyxNQUFPLFVBQ1BDLFNBQUFBLElBRUYsRUFBS0UsY0FBY0MsU0FBUSxZQUF5QixJQUF0QkMsRUFBc0IsRUFBdEJBLFFBQVNDLEVBQWEsRUFBYkEsT0FDckNELEVBQVFFLFlBQWMsRUFBS2IsT0FBTyxFQUFLQyxhQUFhYSxRQUFRRixFQUM3RCxHQUNGLElBckVFLDRCQXVFaUIsV0FDbEIsRUFBS0csbUJBQW1CLFFBQ3hCLEVBQUtDLHNCQUNOLElBMUVFLDRCQTRFaUIsV0FDbEIsRUFBS0QsbUJBQW1CLFFBQ3hCLEVBQUtDLHNCQUNOLElBOUVDQyxLQUFLQyxtQkFBcUI3QixFQUMxQjRCLEtBQUtFLGVBQWlCN0IsRUFDdEIyQixLQUFLbEIsaUJBQW1CTixFQUN4QndCLEtBQUtHLG9CQUFzQjFCLEVBQzNCdUIsS0FBS0ksc0JBQXdCOUIsRUFDN0IwQixLQUFLSyxzQkFBd0I5QixFQUM3QnlCLEtBQUtNLGNBQWdCQyxTQUFTQyxjQUFjUixLQUFLSSx1QkFDakRKLEtBQUtTLGNBQWdCRixTQUFTQyxjQUFjUixLQUFLSyxzQkFDbEQsQywrQ0FFRCxXQUNFSyxPQUFPQyxTQUFTLEVBQUcsRUFDcEIsRyw4QkFFRCxXQUNFWCxLQUFLUixjQUFnQlEsS0FBS0csb0JBQW9CUyxLQUFJLFNBQUFDLEdBQ2hELE1BQU8sQ0FDTG5CLFFBQVNhLFNBQVNDLGNBQWNLLEVBQUtDLFVBQ3JDbkIsT0FBUWtCLEVBQUtFLGNBRWhCLEdBQ0YsRyxvQ0FFRCxXQUNFLEksRUFBTUMsRUFBYWhCLEtBQUtqQixPQUFPaUIsS0FBS3BCLFFBQVUsR0FBR3FDLFdBQVUsR0FDckRDLEVBQWVsQixLQUFLakIsT0FBTyxHQUFHa0MsV0FBVSxHQUU5Q2pCLEtBQUttQixXQUFXQyxPQUFPRixHQUN2QmxCLEtBQUttQixXQUFXRSxRQUFRTCxHQUN4QmhCLEtBQUtqQixPQUFMLENBQWVpQyxHQUFmLE8sK0NBQThCaEIsS0FBS2pCLFMsZ2tCQUFuQyxDQUEyQ21DLEdBQzVDLEcsdUNBRUQsV0FDRWxCLEtBQUtqQixPQUFPLEdBQUdHLFNBQ2ZjLEtBQUtqQixPQUFPaUIsS0FBS3BCLFFBQVUsR0FBR00sUUFDL0IsRyxnQ0E2Q0QsV0FDRWMsS0FBS00sY0FBY2dCLGlCQUFpQixRQUFTdEIsS0FBS3VCLG1CQUNsRHZCLEtBQUtTLGNBQWNhLGlCQUFpQixRQUFTdEIsS0FBS3dCLGtCQUNuRCxHLG1DQUVELFdBQ0V4QixLQUFLTSxjQUFjbUIsb0JBQW9CLFFBQVN6QixLQUFLdUIsbUJBQ3JEdkIsS0FBS1MsY0FBY2dCLG9CQUFvQixRQUFTekIsS0FBS3dCLGtCQUN0RCxHLDBCQUVELFdBQ0V4QixLQUFLbUIsV0FBYVosU0FBU0MsY0FBY1IsS0FBS0Msb0JBQzlDRCxLQUFLakIsT0FBUzJDLE1BQU1DLEtBQUszQixLQUFLbUIsV0FBV1MsaUJBQWlCNUIsS0FBS0UsaUJBQy9ERixLQUFLaEIsWUFBYyxFQUNuQmdCLEtBQUtwQixRQUFVb0IsS0FBS2pCLE9BQU84QyxNQUM1QixHLHdCQUVELFdBQ0U3QixLQUFLOEIsd0JBQ0w5QixLQUFLK0IsNEJBQ0wvQixLQUFLZ0MsZUFDTGhDLEtBQUtpQyxtQkFDTGpDLEtBQUtrQyx5QkFDTGxDLEtBQUttQyxxQkFDTG5DLEtBQUtELHFCQUFxQixPQUMzQixHLGtCQUVELFdBQ0VDLEtBQUtnQyxlQUNMaEMsS0FBS2lDLG1CQUNMakMsS0FBS2tDLHlCQUNMbEMsS0FBS21DLHFCQUNMbkMsS0FBS0QscUJBQXFCLFFBQzFCQyxLQUFLb0MsWUFDTixNLHNFQTNIa0JqRSxHLDRZQ0FBa0UsRUFBQUEsV0FDbkIsY0FBNEQsV0FBOUNqRSxFQUE4QyxFQUE5Q0Esa0JBQW1CQyxFQUEyQixFQUEzQkEsY0FBZWlFLEVBQVksRUFBWkEsVSw0RkFBWSxzQ0ErQnZDLFNBQUM1RCxHQUNwQixJQUFNQyxFQUFpQixTQUFSRCxFQUFpQixFQUFLRSxRQUFVLEVBQ3pDQyxFQUFzQixTQUFSSCxFQUFpQixFQUFJLEVBQUtFLFFBQVUsRUFDcEQsRUFBS0ksY0FBZ0JMLElBQ3ZCLEVBQUtJLE9BQU9GLEdBQWFNLGVBQWUsQ0FDdENDLE9BQVEsUUFDUkMsTUFBTyxVQUNQQyxTQUFVLFNBRVosRUFBS04sWUFBY0gsR0FFckIsRUFBS0csWUFBc0IsU0FBUk4sRUFDZixFQUFLTSxZQUFjLEVBQ25CLEVBQUtBLFlBQWMsQ0FDeEIsSUE3QzJELCtCQStDckMsV0FBeUIsSUFBeEJNLEVBQXdCLHVEQUFiLFNBQ2pDLEVBQUtQLE9BQU8sRUFBS0MsYUFBYUcsZUFBZSxDQUMzQ0MsT0FBUSxRQUNSQyxNQUFPLFVBQ1BDLFNBQUFBLEdBRUgsSUFyRDJELHNCQXVEOUMsU0FBQWlELEdBQ1osRUFBS0MsVUFBWUQsRUFBSUUsUUFBUSxHQUFHQyxRQUNoQyxFQUFLQyxVQUFZSixFQUFJRSxRQUFRLEdBQUdHLE9BQ2pDLElBMUQyRCxxQkE0RC9DLFNBQUFMLEdBQ1gsR0FBdUIsT0FBbkIsRUFBS0MsV0FJYyxPQUFuQixFQUFLRyxVQUFULENBSUEsSUFBTUUsRUFBV04sRUFBSUUsUUFBUSxHQUFHQyxRQUMxQkksRUFBV1AsRUFBSUUsUUFBUSxHQUFHRyxRQUUxQkcsRUFBUSxFQUFLUCxVQUFZSyxFQUN6QkcsRUFBUSxFQUFLTCxVQUFZRyxFQUUzQkcsS0FBS0MsSUFBSUgsR0FBU0UsS0FBS0MsSUFBSUYsS0FDN0IsRUFBS2xELG1CQUFtQmlELEVBQVEsRUFBSSxPQUFTLFFBQzdDLEVBQUtoRCx3QkFHUCxFQUFLeUMsVUFBWSxLQUNqQixFQUFLRyxVQUFZLEtBRWpCSixFQUFJWSxnQkFoQkgsQ0FpQkYsSUFwRjJELDZCQXNGdkMsV0FDbkIsRUFBS1gsVUFBWSxLQUNqQixFQUFLRyxVQUFZLEtBRWpCLEVBQUt4QixXQUFXRyxpQkFBaUIsYUFBYyxFQUFLOEIsYUFBYSxHQUNqRSxFQUFLakMsV0FBV0csaUJBQWlCLFlBQWEsRUFBSytCLFlBQVksRUFDaEUsSUEzRkNyRCxLQUFLQyxtQkFBcUI3QixFQUMxQjRCLEtBQUtFLGVBQWlCN0IsRUFDdEIyQixLQUFLc0QsVUFBWWhCLENBQ2xCLEMsK0NBRUQsV0FDRTVCLE9BQU9DLFNBQVMsRUFBRyxFQUNwQixHLHlCQUVELFdBQ0VYLEtBQUttQixXQUFhWixTQUFTQyxjQUFjUixLQUFLQyxvQkFDOUNELEtBQUtqQixPQUFTMkMsTUFBTUMsS0FBSzNCLEtBQUttQixXQUFXUyxpQkFBaUI1QixLQUFLRSxpQkFDL0RGLEtBQUtoQixZQUFjLEVBQ25CZ0IsS0FBS3BCLFFBQVVvQixLQUFLakIsT0FBTzhDLE1BQzVCLEcsb0NBRUQsV0FDRSxJLEVBQU1iLEVBQWFoQixLQUFLakIsT0FBT2lCLEtBQUtwQixRQUFVLEdBQUdxQyxXQUFVLEdBQ3JEQyxFQUFlbEIsS0FBS2pCLE9BQU8sR0FBR2tDLFdBQVUsR0FFOUNqQixLQUFLbUIsV0FBV0MsT0FBT0YsR0FDdkJsQixLQUFLbUIsV0FBV0UsUUFBUUwsR0FDeEJoQixLQUFLakIsT0FBTCxDQUFlaUMsR0FBZixPLCtDQUE4QmhCLEtBQUtqQixTLGdrQkFBbkMsQ0FBMkNtQyxHQUM1QyxHLHVDQUVELFdBQ0VsQixLQUFLakIsT0FBTyxHQUFHRyxTQUNmYyxLQUFLakIsT0FBT2lCLEtBQUtwQixRQUFVLEdBQUdNLFFBQy9CLEcsbUNBaUVELFdBQ0VjLEtBQUttQixXQUFXTSxvQkFBb0IsYUFBY3pCLEtBQUtvRCxhQUFhLEdBQ3BFcEQsS0FBS21CLFdBQVdNLG9CQUFvQixZQUFhekIsS0FBS3FELFlBQVksRUFDbkUsRyx3QkFFRCxXQUNFckQsS0FBSytCLDRCQUNML0IsS0FBSzhCLHdCQUNMOUIsS0FBS3VELGNBQ0x2RCxLQUFLa0MseUJBQ0xsQyxLQUFLbUMsb0JBQ04sRyxrQkFFRCxXQUNFbkMsS0FBS3VELGNBQ0x2RCxLQUFLa0MseUJBQ0xsQyxLQUFLbUMscUJBQ0xuQyxLQUFLRCxxQkFBcUIsUUFDMUJDLEtBQUtvQyxZQUNOLE0sc0VBbEhrQkMsR0NBUm1CLEVBQWNqRCxTQUFTcUIsaUJBQWlCLGVBQ3hDNkIsRUFBcUJsRCxTQUFTcUIsaUJBQWlCLGtCQUMvQzhCLEVBQU9uRCxTQUFTQyxjQUFjLFNDSXJCLElBQUlyQyxFQUFpQixDQUN6Q0Msa0JBQW1CLG9CQUNuQkMsY0FBZSxvQkFDZkcsZ0JBQWlCLDBCQUNqQkYsYUFBYywyQkFDZEMsYUFBYywwQkFDZEUsbUJBQW9CLENBQ2xCLENBQUVxQyxTQUFVLGdCQUFpQkMsY0FBZSxTQUM1QyxDQUFFRCxTQUFVLGVBQWdCQyxjQUFlLFdBR2pDNEMsT0FFZCxJQUFNQyxFQUFnQixJQUFJdkIsRUFBYyxDQUN0Q2pFLGtCQUFtQixzQ0FDbkJDLGNBQWUsYUFDZmlFLFNBSHNDLFdBSXBDdUIsUUFBUUMsSUFBSTlELEtBQUtoQixZQUNsQixJQUVINEUsRUFBY0QsT0FFZEgsRUFBWS9ELFNBQVEsU0FBQXNFLEdBQ2xCQSxFQUFLekMsaUJBQWlCLFNBQVMsV0FDN0IsSUFBTTBDLEVBQVlELEVBQUtsRSxRQUFRb0UsS0FDL0IxRCxTQUNHQyxjQUFjd0QsR0FDZDdFLGVBQWUsQ0FDZEcsU0FBVSxVQUVmLEdBQ0YsSUFFRG1FLEVBQW1CaEUsU0FBUSxTQUFBeUUsR0FDekJBLEVBQU81QyxpQkFBaUIsU0FBUyxXQUMvQm9DLEVBQUt6RSxVQUFVa0YsT0FBTyxhQUN0QkQsRUFDRzFELGNBQWMsaUNBQ2R2QixVQUNBa0YsT0FBTyxvQ0FDWCxHQUNGLElBRUQ1RCxTQUFTcUIsaUJBQWlCLGtCQUFrQm5DLFNBQVEsU0FBQXlFLEdBQ2xEQSxFQUFPNUMsaUJBQWlCLFNBQVMsV0FDL0JmLFNBQ0dDLGNBQWMsdUJBQ2R2QixVQUNBQyxPQUFPLHNCQUNWcUIsU0FDR0MsY0FBYyx5QkFDZHZCLFVBQ0FDLE9BQU8sd0JBQ1ZxQixTQUNHQyxjQURILHNCQUNnQzBELEVBQU9yRSxRQUFRdUUsT0FDNUNuRixVQUNBTSxJQUFJLHNCQUNQMkUsRUFDR2pGLFVBQ0FNLElBQUksdUJBQ1IsR0FDRixJQUVEZ0IsU0FBU0MsY0FBYyxtQkFBbUJjLGlCQUFpQixTQUFTLFdBQ2xFZixTQUFTQyxjQUFjLGdCQUFnQnZCLFVBQVVrRixPQUFPLHNCQUN4RDVELFNBQVNDLGNBQWMsbUJBQW1CdkIsVUFBVWtGLE9BQU8sbUJBQzVELElBRUQsSUFBTUUsRUFBTTlELFNBQVNDLGNBQWMsa0JBQ25DNkQsRUFBSS9DLGlCQUFpQixVQUFVLFNBQUFpQixHQUM3QmhDLFNBQ0dDLGNBQWMsdUJBQ2R2QixVQUNBQyxPQUFPLHNCQUNWcUIsU0FDR0MsY0FESCxzQkFDZ0M2RCxFQUFJQyxRQUNqQ3JGLFVBQ0FNLElBQUksc0JBQ1BxRSxFQUFjVyxZQUNmLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmF2ZWwvLi9zcmMvY29tcG9uZW50cy9DYXJvdXNlbFNjcm9sbGVyLmpzIiwid2VicGFjazovL2dyYXZlbC8uL3NyYy9jb21wb25lbnRzL1N3aXBlU2Nyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vZ3JhdmVsLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9ncmF2ZWwvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2Fyb3VzZWxTY3JvbGxlciB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjb250YWluZXJTZWxlY3RvcixcbiAgICBpdGVtc1NlbGVjdG9yLFxuICAgIG5leHRTY3JvbGxlcixcbiAgICBwcmV2U2Nyb2xsZXIsXG4gICAgYWN0aXZlSXRlbUNsYXNzID0gbnVsbCxcbiAgICB0ZXh0SXRlbXNTZWxlY3RvcnMgPSBbXVxuICB9KSB7XG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcbiAgICB0aGlzLl9pdGVtc1NlbGVjdG9yID0gaXRlbXNTZWxlY3RvcjtcbiAgICB0aGlzLl9hY3RpdmVJdGVtQ2xhc3MgPSBhY3RpdmVJdGVtQ2xhc3M7XG4gICAgdGhpcy5fdGV4dEl0ZW1zU2VsZWN0b3JzID0gdGV4dEl0ZW1zU2VsZWN0b3JzO1xuICAgIHRoaXMuX25leHRTY3JvbGxlclNlbGVjdG9yID0gbmV4dFNjcm9sbGVyO1xuICAgIHRoaXMuX3ByZXZTY3JvbGxlclNlbGVjdG9yID0gcHJldlNjcm9sbGVyO1xuICAgIHRoaXMuX25leHRTY3JvbGxlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmV4dFNjcm9sbGVyU2VsZWN0b3IpO1xuICAgIHRoaXMuX3ByZXZTY3JvbGxlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcHJldlNjcm9sbGVyU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Jlc2V0UGFnZSgpIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gIH1cblxuICBfZ2V0VGV4dEVsZW1lbnRzKCkge1xuICAgIHRoaXMuX3RleHRFbGVtZW50cyA9IHRoaXMuX3RleHRJdGVtc1NlbGVjdG9ycy5tYXAoaXRlbSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGl0ZW0uc2VsZWN0b3IpLFxuICAgICAgICBzb3VyY2U6IGl0ZW0uYXR0cmlidXRlTmFtZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2FkZFNjcm9sbFBsYWNlaG9sZGVycygpIHtcbiAgICBjb25zdCBlbmRFbGVtZW50ID0gdGhpcy5faXRlbXNbdGhpcy5fbGVuZ3RoIC0gMV0uY2xvbmVOb2RlKHRydWUpO1xuICAgIGNvbnN0IHN0YXJ0RWxlbWVudCA9IHRoaXMuX2l0ZW1zWzBdLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoc3RhcnRFbGVtZW50KTtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbmRFbGVtZW50KTtcbiAgICB0aGlzLl9pdGVtcyA9IFtlbmRFbGVtZW50LCAuLi50aGlzLl9pdGVtcywgc3RhcnRFbGVtZW50XTtcbiAgfVxuXG4gIF9yZW1vdmVTY3JvbGxQbGFjZWhvbGRlcnMoKSB7XG4gICAgdGhpcy5faXRlbXNbMF0ucmVtb3ZlKCk7XG4gICAgdGhpcy5faXRlbXNbdGhpcy5fbGVuZ3RoICsgMV0ucmVtb3ZlKCk7XG4gIH1cblxuICBfY2hlY2tTY3JvbGxCb3JkZXIgPSAoZGlyKSA9PiB7XG4gICAgY29uc3QgYm9yZGVyID0gZGlyID09PSAnbmV4dCcgPyB0aGlzLl9sZW5ndGggOiAxO1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gZGlyID09PSAnbmV4dCcgPyAwIDogdGhpcy5fbGVuZ3RoICsgMTtcbiAgICBpZiAodGhpcy5fYWN0aXZlSXRlbUNsYXNzKSB7XG4gICAgICB0aGlzLl9pdGVtc1t0aGlzLl9jdXJyZW50SWR4XS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2ZUl0ZW1DbGFzcyk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9jdXJyZW50SWR4ID09PSBib3JkZXIpIHtcbiAgICAgIHRoaXMuX2l0ZW1zW3BsYWNlaG9sZGVyXS5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgIGlubGluZTogJ3N0YXJ0JyxcbiAgICAgICAgYmxvY2s6ICduZWFyZXN0JyxcbiAgICAgICAgYmVoYXZpb3I6ICdhdXRvJ1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9jdXJyZW50SWR4ID0gcGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIHRoaXMuX2N1cnJlbnRJZHggPSBkaXIgPT09ICduZXh0J1xuICAgICAgPyB0aGlzLl9jdXJyZW50SWR4ICsgMVxuICAgICAgOiB0aGlzLl9jdXJyZW50SWR4IC0gMTtcbiAgfVxuXG4gIF9zY3JvbGxUb0N1cnJlbnRJdGVtID0gKGJlaGF2aW9yID0gJ3Ntb290aCcpID0+IHtcbiAgICBpZiAodGhpcy5fYWN0aXZlSXRlbUNsYXNzKSB7XG4gICAgICB0aGlzLl9pdGVtc1t0aGlzLl9jdXJyZW50SWR4XS5jbGFzc0xpc3QuYWRkKHRoaXMuX2FjdGl2ZUl0ZW1DbGFzcyk7XG4gICAgfVxuICAgIHRoaXMuX2l0ZW1zW3RoaXMuX2N1cnJlbnRJZHhdLnNjcm9sbEludG9WaWV3KHtcbiAgICAgIGlubGluZTogJ3N0YXJ0JyxcbiAgICAgIGJsb2NrOiAnbmVhcmVzdCcsXG4gICAgICBiZWhhdmlvclxuICAgIH0pO1xuICAgIHRoaXMuX3RleHRFbGVtZW50cy5mb3JFYWNoKCh7IGVsZW1lbnQsIHNvdXJjZSB9KSA9PiB7XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5faXRlbXNbdGhpcy5fY3VycmVudElkeF0uZGF0YXNldFtzb3VyY2VdO1xuICAgIH0pO1xuICB9XG5cbiAgX25leHRFdmVudEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgdGhpcy5fY2hlY2tTY3JvbGxCb3JkZXIoJ25leHQnKTtcbiAgICB0aGlzLl9zY3JvbGxUb0N1cnJlbnRJdGVtKCk7XG4gIH1cblxuICBfcHJldkV2ZW50SGFuZGxlciA9ICgpID0+IHtcbiAgICB0aGlzLl9jaGVja1Njcm9sbEJvcmRlcigncHJldicpO1xuICAgIHRoaXMuX3Njcm9sbFRvQ3VycmVudEl0ZW0oKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9uZXh0U2Nyb2xsZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9uZXh0RXZlbnRIYW5kbGVyKTtcbiAgICB0aGlzLl9wcmV2U2Nyb2xsZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9wcmV2RXZlbnRIYW5kbGVyKTtcbiAgfVxuXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9uZXh0U2Nyb2xsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9uZXh0RXZlbnRIYW5kbGVyKTtcbiAgICB0aGlzLl9wcmV2U2Nyb2xsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9wcmV2RXZlbnRIYW5kbGVyKTtcbiAgfVxuXG4gIF9nZXRFbGVtZW50cygpIHtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB0aGlzLl9pdGVtcyA9IEFycmF5LmZyb20odGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faXRlbXNTZWxlY3RvcikpO1xuICAgIHRoaXMuX2N1cnJlbnRJZHggPSAxO1xuICAgIHRoaXMuX2xlbmd0aCA9IHRoaXMuX2l0ZW1zLmxlbmd0aDtcbiAgfVxuXG4gIHJlc2V0SXRlbXMoKSB7XG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9yZW1vdmVTY3JvbGxQbGFjZWhvbGRlcnMoKTtcbiAgICB0aGlzLl9nZXRFbGVtZW50cygpO1xuICAgIHRoaXMuX2dldFRleHRFbGVtZW50cygpO1xuICAgIHRoaXMuX2FkZFNjcm9sbFBsYWNlaG9sZGVycygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fc2Nyb2xsVG9DdXJyZW50SXRlbSgnYXV0bycpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLl9nZXRFbGVtZW50cygpO1xuICAgIHRoaXMuX2dldFRleHRFbGVtZW50cygpO1xuICAgIHRoaXMuX2FkZFNjcm9sbFBsYWNlaG9sZGVycygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fc2Nyb2xsVG9DdXJyZW50SXRlbSgnYXV0bycpO1xuICAgIHRoaXMuX3Jlc2V0UGFnZSgpXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFN3aXBlU2Nyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcih7IGNvbnRhaW5lclNlbGVjdG9yLCBpdGVtc1NlbGVjdG9yLCBjYWxsYmFjayB9KSB7XG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcbiAgICB0aGlzLl9pdGVtc1NlbGVjdG9yID0gaXRlbXNTZWxlY3RvcjtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICB9XG5cbiAgX3Jlc2V0UGFnZSgpIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gIH1cblxuICBzZXRFbGVtZW50cygpIHtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB0aGlzLl9pdGVtcyA9IEFycmF5LmZyb20odGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faXRlbXNTZWxlY3RvcikpO1xuICAgIHRoaXMuX2N1cnJlbnRJZHggPSAxO1xuICAgIHRoaXMuX2xlbmd0aCA9IHRoaXMuX2l0ZW1zLmxlbmd0aDtcbiAgfVxuXG4gIF9hZGRTY3JvbGxQbGFjZWhvbGRlcnMoKSB7XG4gICAgY29uc3QgZW5kRWxlbWVudCA9IHRoaXMuX2l0ZW1zW3RoaXMuX2xlbmd0aCAtIDFdLmNsb25lTm9kZSh0cnVlKTtcbiAgICBjb25zdCBzdGFydEVsZW1lbnQgPSB0aGlzLl9pdGVtc1swXS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKHN0YXJ0RWxlbWVudCk7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZW5kRWxlbWVudCk7XG4gICAgdGhpcy5faXRlbXMgPSBbZW5kRWxlbWVudCwgLi4udGhpcy5faXRlbXMsIHN0YXJ0RWxlbWVudF07XG4gIH1cblxuICBfcmVtb3ZlU2Nyb2xsUGxhY2Vob2xkZXJzKCkge1xuICAgIHRoaXMuX2l0ZW1zWzBdLnJlbW92ZSgpO1xuICAgIHRoaXMuX2l0ZW1zW3RoaXMuX2xlbmd0aCArIDFdLnJlbW92ZSgpO1xuICB9XG5cbiAgX2NoZWNrU2Nyb2xsQm9yZGVyID0gKGRpcikgPT4ge1xuICAgIGNvbnN0IGJvcmRlciA9IGRpciA9PT0gJ25leHQnID8gdGhpcy5fbGVuZ3RoIDogMTtcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IGRpciA9PT0gJ25leHQnID8gMCA6IHRoaXMuX2xlbmd0aCArIDE7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRJZHggPT09IGJvcmRlcikge1xuICAgICAgdGhpcy5faXRlbXNbcGxhY2Vob2xkZXJdLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgaW5saW5lOiAnc3RhcnQnLFxuICAgICAgICBibG9jazogJ25lYXJlc3QnLFxuICAgICAgICBiZWhhdmlvcjogJ2F1dG8nXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2N1cnJlbnRJZHggPSBwbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudElkeCA9IGRpciA9PT0gJ25leHQnXG4gICAgICA/IHRoaXMuX2N1cnJlbnRJZHggKyAxXG4gICAgICA6IHRoaXMuX2N1cnJlbnRJZHggLSAxO1xuICB9XG5cbiAgX3Njcm9sbFRvQ3VycmVudEl0ZW0gPSAoYmVoYXZpb3IgPSAnc21vb3RoJykgPT4ge1xuICAgIHRoaXMuX2l0ZW1zW3RoaXMuX2N1cnJlbnRJZHhdLnNjcm9sbEludG9WaWV3KHtcbiAgICAgIGlubGluZTogJ3N0YXJ0JyxcbiAgICAgIGJsb2NrOiAnbmVhcmVzdCcsXG4gICAgICBiZWhhdmlvclxuICAgIH0pO1xuICB9XG5cbiAgX3N0YXJ0VG91Y2ggPSBldnQgPT4ge1xuICAgIHRoaXMuX2luaXRpYWxYID0gZXZ0LnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICB0aGlzLl9pbml0aWFsWSA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFk7XG4gIH1cblxuICBfbW92ZVRvdWNoID0gZXZ0ID0+IHtcbiAgICBpZiAodGhpcy5faW5pdGlhbFggPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faW5pdGlhbFkgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50WCA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgY29uc3QgY3VycmVudFkgPSBldnQudG91Y2hlc1swXS5jbGllbnRZO1xuXG4gICAgY29uc3QgZGlmZlggPSB0aGlzLl9pbml0aWFsWCAtIGN1cnJlbnRYO1xuICAgIGNvbnN0IGRpZmZZID0gdGhpcy5faW5pdGlhbFkgLSBjdXJyZW50WTtcblxuICAgIGlmIChNYXRoLmFicyhkaWZmWCkgPiBNYXRoLmFicyhkaWZmWSkpIHtcbiAgICAgIHRoaXMuX2NoZWNrU2Nyb2xsQm9yZGVyKGRpZmZYID4gMCA/ICduZXh0JyA6ICdwcmV2Jyk7XG4gICAgICB0aGlzLl9zY3JvbGxUb0N1cnJlbnRJdGVtKCk7XG4gICAgfVxuXG4gICAgdGhpcy5faW5pdGlhbFggPSBudWxsO1xuICAgIHRoaXMuX2luaXRpYWxZID0gbnVsbDtcblxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX2luaXRpYWxYID0gbnVsbDtcbiAgICB0aGlzLl9pbml0aWFsWSA9IG51bGw7XG5cbiAgICB0aGlzLl9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fc3RhcnRUb3VjaCwgZmFsc2UpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX21vdmVUb3VjaCwgZmFsc2UpO1xuICB9XG5cbiAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLl9zdGFydFRvdWNoLCBmYWxzZSk7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fbW92ZVRvdWNoLCBmYWxzZSk7XG4gIH1cblxuICByZXNldEl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbW92ZVNjcm9sbFBsYWNlaG9sZGVycygpO1xuICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5zZXRFbGVtZW50cygpO1xuICAgIHRoaXMuX2FkZFNjcm9sbFBsYWNlaG9sZGVycygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIHRoaXMuc2V0RWxlbWVudHMoKTtcbiAgICB0aGlzLl9hZGRTY3JvbGxQbGFjZWhvbGRlcnMoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3Njcm9sbFRvQ3VycmVudEl0ZW0oJ2F1dG8nKTtcbiAgICB0aGlzLl9yZXNldFBhZ2UoKVxuICB9XG59XG4iLCJleHBvcnQgY29uc3QgYW5jaG9yTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ocmVmXScpO1xuZXhwb3J0IGNvbnN0IHRvZ2dsZVRoZW1lQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aGVtZS10b2dnbGVyJyk7XG5leHBvcnQgY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJyk7XG4iLCJpbXBvcnQgQ2Fyb3VzZWxTY3JvbGxlciBmcm9tICdAL2NvbXBvbmVudHMvQ2Fyb3VzZWxTY3JvbGxlcic7XG5pbXBvcnQgU3dpcGVTY3JvbGxlciBmcm9tICdAL2NvbXBvbmVudHMvU3dpcGVTY3JvbGxlcic7XG5cbmltcG9ydCB7IGFuY2hvckxpbmtzLCBwYWdlLCB0b2dnbGVUaGVtZUJ1dHRvbnMgfSBmcm9tICdAL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cblxuY29uc3Qgcm9hZHNDYXJvdXNlbCA9IG5ldyBDYXJvdXNlbFNjcm9sbGVyKHtcbiAgY29udGFpbmVyU2VsZWN0b3I6ICcucm9hZHNfX3BpY3MtbGlzdCcsXG4gIGl0ZW1zU2VsZWN0b3I6ICcucm9hZHNfX3BpY3MtaXRlbScsXG4gIGFjdGl2ZUl0ZW1DbGFzczogJ3JvYWRzX19waWNzLWl0ZW1fYWN0aXZlJyxcbiAgbmV4dFNjcm9sbGVyOiAnLnJvYWRzX19idXR0b25fZGlyX3JpZ2h0JyxcbiAgcHJldlNjcm9sbGVyOiAnLnJvYWRzX19idXR0b25fZGlyX2xlZnQnLFxuICB0ZXh0SXRlbXNTZWxlY3RvcnM6IFtcbiAgICB7IHNlbGVjdG9yOiAnLnJvYWRzX190aXRsZScsIGF0dHJpYnV0ZU5hbWU6ICd0aXRsZScgfSxcbiAgICB7IHNlbGVjdG9yOiAnLnJvYWRzX190ZXh0JywgYXR0cmlidXRlTmFtZTogJ3RleHQnIH0sXG4gIF1cbn0pO1xucm9hZHNDYXJvdXNlbC5pbml0KCk7XG5cbmNvbnN0IGJpa2VzQ2Fyb3VzZWwgPSBuZXcgU3dpcGVTY3JvbGxlcih7XG4gIGNvbnRhaW5lclNlbGVjdG9yOiAnLmJpa2VzX190eXBlX2FjdGl2ZSA+IC5iaWtlc19fYmlrZXMnLFxuICBpdGVtc1NlbGVjdG9yOiAnLmJpa2VzX19saScsXG4gIGNhbGxiYWNrKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX2N1cnJlbnRJZHgpXG4gIH1cbn0pO1xuYmlrZXNDYXJvdXNlbC5pbml0KCk7XG5cbmFuY2hvckxpbmtzLmZvckVhY2gobGluayA9PiB7XG4gIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3Qgc2VjdGlvbklkID0gbGluay5kYXRhc2V0LmhyZWY7XG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHNlY3Rpb25JZClcbiAgICAgIC5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgfSk7XG4gIH0pO1xufSk7XG5cbnRvZ2dsZVRoZW1lQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBwYWdlLmNsYXNzTGlzdC50b2dnbGUoJ3BhZ2VfZGFyaycpO1xuICAgIGJ1dHRvblxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aGVtZS10b2dnbGVyX19zd2l0Y2gtdG9nZ2xlJylcbiAgICAgIC5jbGFzc0xpc3RcbiAgICAgIC50b2dnbGUoJ3RoZW1lLXRvZ2dsZXJfX3N3aXRjaC10b2dnbGVfZGFyaycpO1xuICB9KTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmlrZXNfX2J1dHRvbicpLmZvckVhY2goYnV0dG9uID0+IHtcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmJpa2VzX190eXBlX2FjdGl2ZScpXG4gICAgICAuY2xhc3NMaXN0XG4gICAgICAucmVtb3ZlKCdiaWtlc19fdHlwZV9hY3RpdmUnKTtcbiAgICBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5iaWtlc19fYnV0dG9uX2FjdGl2ZScpXG4gICAgICAuY2xhc3NMaXN0XG4gICAgICAucmVtb3ZlKCdiaWtlc19fYnV0dG9uX2FjdGl2ZScpO1xuICAgIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihgI2Jpa2VzLXR5cGUtJHtidXR0b24uZGF0YXNldC50eXBlfWApXG4gICAgICAuY2xhc3NMaXN0XG4gICAgICAuYWRkKCdiaWtlc19fdHlwZV9hY3RpdmUnKTtcbiAgICBidXR0b25cbiAgICAgIC5jbGFzc0xpc3RcbiAgICAgIC5hZGQoJ2Jpa2VzX19idXR0b25fYWN0aXZlJyk7XG4gIH0pO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2J1cmdlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19uYXYnKS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX25hdl9vcGVuZWQnKVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdoYW1idXJnZXJfYWN0aXZlJylcbn0pO1xuXG5jb25zdCBzZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmlrZXNfX3NlbGVjdCcpXG5zZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZXZ0ID0+IHtcbiAgZG9jdW1lbnRcbiAgICAucXVlcnlTZWxlY3RvcignLmJpa2VzX190eXBlX2FjdGl2ZScpXG4gICAgLmNsYXNzTGlzdFxuICAgIC5yZW1vdmUoJ2Jpa2VzX190eXBlX2FjdGl2ZScpO1xuICBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKGAjYmlrZXMtdHlwZS0ke3NlbC52YWx1ZX1gKVxuICAgIC5jbGFzc0xpc3RcbiAgICAuYWRkKCdiaWtlc19fdHlwZV9hY3RpdmUnKTtcbiAgYmlrZXNDYXJvdXNlbC5yZXNldEl0ZW1zKClcbn0pO1xuXG4iXSwibmFtZXMiOlsiQ2Fyb3VzZWxTY3JvbGxlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXNTZWxlY3RvciIsIm5leHRTY3JvbGxlciIsInByZXZTY3JvbGxlciIsImFjdGl2ZUl0ZW1DbGFzcyIsInRleHRJdGVtc1NlbGVjdG9ycyIsImRpciIsImJvcmRlciIsIl9sZW5ndGgiLCJwbGFjZWhvbGRlciIsIl9hY3RpdmVJdGVtQ2xhc3MiLCJfaXRlbXMiLCJfY3VycmVudElkeCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNjcm9sbEludG9WaWV3IiwiaW5saW5lIiwiYmxvY2siLCJiZWhhdmlvciIsImFkZCIsIl90ZXh0RWxlbWVudHMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInNvdXJjZSIsInRleHRDb250ZW50IiwiZGF0YXNldCIsIl9jaGVja1Njcm9sbEJvcmRlciIsIl9zY3JvbGxUb0N1cnJlbnRJdGVtIiwidGhpcyIsIl9jb250YWluZXJTZWxlY3RvciIsIl9pdGVtc1NlbGVjdG9yIiwiX3RleHRJdGVtc1NlbGVjdG9ycyIsIl9uZXh0U2Nyb2xsZXJTZWxlY3RvciIsIl9wcmV2U2Nyb2xsZXJTZWxlY3RvciIsIl9uZXh0U2Nyb2xsZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfcHJldlNjcm9sbGVyIiwid2luZG93Iiwic2Nyb2xsVG8iLCJtYXAiLCJpdGVtIiwic2VsZWN0b3IiLCJhdHRyaWJ1dGVOYW1lIiwiZW5kRWxlbWVudCIsImNsb25lTm9kZSIsInN0YXJ0RWxlbWVudCIsIl9jb250YWluZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9uZXh0RXZlbnRIYW5kbGVyIiwiX3ByZXZFdmVudEhhbmRsZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsIl9yZW1vdmVTY3JvbGxQbGFjZWhvbGRlcnMiLCJfZ2V0RWxlbWVudHMiLCJfZ2V0VGV4dEVsZW1lbnRzIiwiX2FkZFNjcm9sbFBsYWNlaG9sZGVycyIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9yZXNldFBhZ2UiLCJTd2lwZVNjcm9sbGVyIiwiY2FsbGJhY2siLCJldnQiLCJfaW5pdGlhbFgiLCJ0b3VjaGVzIiwiY2xpZW50WCIsIl9pbml0aWFsWSIsImNsaWVudFkiLCJjdXJyZW50WCIsImN1cnJlbnRZIiwiZGlmZlgiLCJkaWZmWSIsIk1hdGgiLCJhYnMiLCJwcmV2ZW50RGVmYXVsdCIsIl9zdGFydFRvdWNoIiwiX21vdmVUb3VjaCIsIl9jYWxsYmFjayIsInNldEVsZW1lbnRzIiwiYW5jaG9yTGlua3MiLCJ0b2dnbGVUaGVtZUJ1dHRvbnMiLCJwYWdlIiwiaW5pdCIsImJpa2VzQ2Fyb3VzZWwiLCJjb25zb2xlIiwibG9nIiwibGluayIsInNlY3Rpb25JZCIsImhyZWYiLCJidXR0b24iLCJ0b2dnbGUiLCJ0eXBlIiwic2VsIiwidmFsdWUiLCJyZXNldEl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==